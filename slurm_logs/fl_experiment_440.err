2025-12-21 06:20:08,349 - __main__ - INFO - ðŸš€ Start Ray V2 federated learning
2025-12-21 06:20:08,349 - __main__ - INFO - ðŸ“Š Configuration: 50 clients, 100 rounds training, total nodes: 51
2025-12-21 06:20:08,349 - __main__ - INFO - ðŸ§¹ Clean environment...
2025-12-21 06:20:09,499 - __main__ - INFO - âœ… Environment cleanup completed
2025-12-21 06:20:09,500 - __main__ - INFO - ðŸš€ Applying host network optimizations for ultra-high concurrency...
2025-12-21 06:20:09,617 - __main__ - WARNING - âš ï¸  22 network optimizations could not be applied (may need sudo access)
2025-12-21 06:20:09,617 - __main__ - WARNING - âš ï¸  No host network optimizations applied! High-concurrency FL may experience issues.
2025-12-21 06:20:09,617 - __main__ - WARNING -    Consider running with sudo or contacting HPC admin to apply these settings.
2025-12-21 06:20:09,617 - __main__ - INFO - ðŸ¦­ Initializing Podman rootless environment...
2025-12-21 06:20:09,620 - __main__ - WARNING - âš ï¸  Podman unavailable, trying Docker...
2025-12-21 06:20:09,621 - __main__ - INFO - ðŸ“¦ Using non-container mode (Fallback)
2025-12-21 06:20:09,648	INFO worker.py:1821 -- Connecting to existing Ray cluster at address: 10.0.0.2:6379...
2025-12-21 06:20:09,662	INFO worker.py:1998 -- Connected to Ray cluster. View the dashboard at [1m[32m10.0.0.2:8265 [39m[22m
/home/naicheng_li/.conda/envs/flv2/lib/python3.10/site-packages/ray/_private/worker.py:2046: FutureWarning: Tip: In future versions of Ray, Ray will no longer override accelerator visible devices env var if num_gpus=0 or num_gpus=None (default). To enable this behavior and turn off this error message, set RAY_ACCEL_ENV_VAR_OVERRIDE_ON_ZERO=0
  warnings.warn(
2025-12-21 06:20:10,741 - __main__ - INFO - ðŸš€ Connected to external Ray cluster: 10.0.0.2:6379
2025-12-21 06:20:10,741 - __main__ - INFO -    ðŸ“Š Resources: {'GPU': 6.0, 'CPU': 128.0, 'memory': 549203741902.0, 'accelerator_type:A100': 1.0, 'node:10.0.0.2': 1.0, 'object_store_memory': 235373032242.0, 'node:__internal_head__': 1.0, 'accelerator_type:L4': 1.0, 'node:10.0.0.1': 1.0}
2025-12-21 06:20:10,741 - __main__ - INFO - ðŸŒ Ray Cluster Topology:
2025-12-21 06:20:10,742 - __main__ - INFO -    ðŸ“ Head node: e2df7b3e4c3a... (Server will run here)
2025-12-21 06:20:10,742 - __main__ - INFO -    ðŸ“ Worker nodes: 1 available
2025-12-21 06:20:10,742 - __main__ - INFO -       Worker 1: 3e8473a93fbf...
2025-12-21 06:20:10,742 - __main__ - INFO - ðŸŽ® Detected GPU type on node e2df7b3e4c3a...: A100 -> 40.0GB per GPU
2025-12-21 06:20:10,742 - __main__ - INFO - ðŸ“ Head node (e2df7b3e4c3a...): 4.0 GPUs, 160.0GB total memory
2025-12-21 06:20:10,743 - __main__ - INFO - ðŸŽ® Detected GPU type on node 3e8473a93fbf...: L4 -> 23.0GB per GPU
2025-12-21 06:20:10,743 - __main__ - INFO - ðŸ“ Worker node (3e8473a93fbf...): 2.0 GPUs, 46.0GB total memory
2025-12-21 06:20:10,743 - __main__ - INFO - ðŸ“Š Total GPU memory across all nodes: 206.0GB
2025-12-21 06:20:10,743 - __main__ - INFO - ðŸ“Š Memory per client: 3.0GB â†’ Max capacity: 68 clients
2025-12-21 06:20:10,743 - __main__ - INFO -    Node e2df7b3e4c3a...: 38 clients (160.0GB / 38 = 4.2GB/client)
2025-12-21 06:20:10,744 - __main__ - INFO -    Node 3e8473a93fbf...: 12 clients (46.0GB / 12 = 3.8GB/client)
2025-12-21 06:20:10,744 - __main__ - INFO -    Node e2df7b3e4c3a...: 4.0 GPU, 38 clients, max 10 clients/GPU -> 0.0950 GPU/client
2025-12-21 06:20:10,744 - __main__ - INFO -    Node 3e8473a93fbf...: 2.0 GPU, 12 clients, max 6 clients/GPU -> 0.1583 GPU/client
2025-12-21 06:20:10,744 - __main__ - INFO - ðŸŽ¯ GPU allocation summary: {'total_available_gpus': 6.0, 'total_allocated_gpus': 5.5096, 'utilization_rate': '91.83%', 'server': 'CPU only', 'per_node_allocation': {'e2df7b3e4c3a': {'count': 38, 'total_gpu': 3.610000000000003}, '3e8473a93fbf': {'count': 12, 'total_gpu': 1.8996000000000004}}, 'gpu_clients': 50, 'cpu_clients': 0}
2025-12-21 06:20:10,744 - __main__ - INFO - ðŸ“‹ Client distribution: 50 GPU clients, 0 CPU clients
2025-12-21 06:20:12,776 - __main__ - INFO - ðŸ“ Server scheduled to head node: e2df7b3e4c3a...
2025-12-21 06:20:12,843 - __main__ - INFO - ðŸ“¦ Using Fallback (no container) for Server
2025-12-21 06:20:12,918 - __main__ - INFO - âœ… Server started: 10.0.0.2:43805
2025-12-21 06:20:27,925 - __main__ - INFO - ðŸ“± Edge device distribution: {'smartphone': 50}
2025-12-21 06:20:27,925 - __main__ - INFO - ðŸ“Š Client distribution plan:
2025-12-21 06:20:27,926 - __main__ - INFO -    Client 1 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,927 - __main__ - INFO -    Client 2 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,927 - __main__ - INFO -    Client 3 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,928 - __main__ - INFO -    Client 4 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,928 - __main__ - INFO -    Client 5 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,929 - __main__ - INFO -    Client 6 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,929 - __main__ - INFO -    Client 7 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,930 - __main__ - INFO -    Client 8 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,930 - __main__ - INFO -    Client 9 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,931 - __main__ - INFO -    Client 10 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,931 - __main__ - INFO -    Client 11 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,932 - __main__ - INFO -    Client 12 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,932 - __main__ - INFO -    Client 13 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,933 - __main__ - INFO -    Client 14 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,933 - __main__ - INFO -    Client 15 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,933 - __main__ - INFO -    Client 16 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,934 - __main__ - INFO -    Client 17 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,934 - __main__ - INFO -    Client 18 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,935 - __main__ - INFO -    Client 19 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,935 - __main__ - INFO -    Client 20 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,936 - __main__ - INFO -    Client 21 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,936 - __main__ - INFO -    Client 22 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,937 - __main__ - INFO -    Client 23 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,937 - __main__ - INFO -    Client 24 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,937 - __main__ - INFO -    Client 25 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,938 - __main__ - INFO -    Client 26 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,938 - __main__ - INFO -    Client 27 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,939 - __main__ - INFO -    Client 28 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,939 - __main__ - INFO -    Client 29 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,940 - __main__ - INFO -    Client 30 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,940 - __main__ - INFO -    Client 31 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,940 - __main__ - INFO -    Client 32 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,941 - __main__ - INFO -    Client 33 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,941 - __main__ - INFO -    Client 34 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,941 - __main__ - INFO -    Client 35 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,942 - __main__ - INFO -    Client 36 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,942 - __main__ - INFO -    Client 37 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,943 - __main__ - INFO -    Client 38 -> head (e2df7b3e4c3a...), Node CPUs: 64.0, Clients on node: 38
2025-12-21 06:20:27,943 - __main__ - INFO -    Client 39 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,944 - __main__ - INFO -    Client 40 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,944 - __main__ - INFO -    Client 41 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,944 - __main__ - INFO -    Client 42 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,945 - __main__ - INFO -    Client 43 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,945 - __main__ - INFO -    Client 44 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,946 - __main__ - INFO -    Client 45 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,946 - __main__ - INFO -    Client 46 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,946 - __main__ - INFO -    Client 47 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,947 - __main__ - INFO -    Client 48 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,947 - __main__ - INFO -    Client 49 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,948 - __main__ - INFO -    Client 50 -> worker (3e8473a93fbf...), Node CPUs: 64.0, Clients on node: 12
2025-12-21 06:20:27,948 - __main__ - INFO - ðŸ”§ Client 1 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:28,024 - __main__ - INFO - âœ… Client 1 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:31,028 - __main__ - INFO - ðŸ”§ Client 2 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:31,108 - __main__ - INFO - âœ… Client 2 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:34,112 - __main__ - INFO - ðŸ”§ Client 3 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:34,182 - __main__ - INFO - âœ… Client 3 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:37,186 - __main__ - INFO - ðŸ”§ Client 4 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:37,263 - __main__ - INFO - âœ… Client 4 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:40,267 - __main__ - INFO - ðŸ”§ Client 5 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:40,366 - __main__ - INFO - âœ… Client 5 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:43,367 - __main__ - INFO - ðŸ”§ Client 6 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:43,437 - __main__ - INFO - âœ… Client 6 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:46,440 - __main__ - INFO - ðŸ”§ Client 7 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:46,515 - __main__ - INFO - âœ… Client 7 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:49,519 - __main__ - INFO - ðŸ”§ Client 8 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:49,598 - __main__ - INFO - âœ… Client 8 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:52,602 - __main__ - INFO - ðŸ”§ Client 9 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:52,674 - __main__ - INFO - âœ… Client 9 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:55,678 - __main__ - INFO - ðŸ”§ Client 10 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:55,749 - __main__ - INFO - âœ… Client 10 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:20:58,752 - __main__ - INFO - ðŸ”§ Client 11 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:20:58,826 - __main__ - INFO - âœ… Client 11 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:01,830 - __main__ - INFO - ðŸ”§ Client 12 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:01,900 - __main__ - INFO - âœ… Client 12 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:04,905 - __main__ - INFO - ðŸ”§ Client 13 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:04,972 - __main__ - INFO - âœ… Client 13 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:07,976 - __main__ - INFO - ðŸ”§ Client 14 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:08,048 - __main__ - INFO - âœ… Client 14 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:11,052 - __main__ - INFO - ðŸ”§ Client 15 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:11,119 - __main__ - INFO - âœ… Client 15 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:14,121 - __main__ - INFO - ðŸ”§ Client 16 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:14,206 - __main__ - INFO - âœ… Client 16 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:17,209 - __main__ - INFO - ðŸ”§ Client 17 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:17,284 - __main__ - INFO - âœ… Client 17 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:20,288 - __main__ - INFO - ðŸ”§ Client 18 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:20,358 - __main__ - INFO - âœ… Client 18 (smartphone) started on head node (e2df7b3e4c3a...)
2025-12-21 06:21:23,360 - __main__ - INFO - ðŸ”§ Client 19 resources: num_cpus=1.4632, num_gpus=0.0950, memory=2.00GB
2025-12-21 06:21:23,446 - __main__ - INFO - âœ… Client 19 (smartphone) started on head node (e2df7b3e4c3a...)
srun: Job step aborted: Waiting up to 32 seconds for job step to finish.
srun: Job step aborted: Waiting up to 32 seconds for job step to finish.
slurmstepd-srv-it-node01: error: *** STEP 441.1 ON srv-it-node01 CANCELLED AT 2025-12-21T06:21:23 ***
slurmstepd-srv-it-node02: error: *** STEP 440.0 ON srv-it-node02 CANCELLED AT 2025-12-21T06:21:23 ***
slurmstepd-srv-it-node02: error: *** JOB 440 ON srv-it-node02 CANCELLED AT 2025-12-21T06:21:23 ***
