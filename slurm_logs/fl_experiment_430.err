2025-12-21 04:17:37,961 - __main__ - INFO - ðŸš€ Start Ray V2 federated learning
2025-12-21 04:17:37,961 - __main__ - INFO - ðŸ“Š Configuration: 50 clients, 100 rounds training, total nodes: 51
2025-12-21 04:17:37,961 - __main__ - INFO - ðŸ§¹ Clean environment...
2025-12-21 04:17:39,094 - __main__ - INFO - âœ… Environment cleanup completed
2025-12-21 04:17:39,099 - __main__ - WARNING - âš ï¸  Docker unavailable, switch to non-container mode
2025-12-21 04:17:39,121	INFO worker.py:1821 -- Connecting to existing Ray cluster at address: 10.0.0.2:6379...
2025-12-21 04:17:39,134	INFO worker.py:1998 -- Connected to Ray cluster. View the dashboard at [1m[32m10.0.0.2:8265 [39m[22m
/home/naicheng_li/.conda/envs/flv2/lib/python3.10/site-packages/ray/_private/worker.py:2046: FutureWarning: Tip: In future versions of Ray, Ray will no longer override accelerator visible devices env var if num_gpus=0 or num_gpus=None (default). To enable this behavior and turn off this error message, set RAY_ACCEL_ENV_VAR_OVERRIDE_ON_ZERO=0
  warnings.warn(
2025-12-21 04:17:40,248 - __main__ - INFO - ðŸš€ Connected to external Ray cluster: 10.0.0.2:6379
2025-12-21 04:17:40,249 - __main__ - INFO -    ðŸ“Š Resources: {'GPU': 6.0, 'object_store_memory': 235482482688.0, 'CPU': 128.0, 'memory': 549459126272.0, 'accelerator_type:A100': 1.0, 'node:10.0.0.2': 1.0, 'node:__internal_head__': 1.0, 'node:10.0.0.1': 1.0, 'accelerator_type:L4': 1.0}
2025-12-21 04:17:40,249 - __main__ - INFO - ðŸŒ Ray Cluster Topology:
2025-12-21 04:17:40,249 - __main__ - INFO -    ðŸ“ Head node: 4013ec76b302... (Server will run here)
2025-12-21 04:17:40,249 - __main__ - INFO -    ðŸ“ Worker nodes: 1 available
2025-12-21 04:17:40,249 - __main__ - INFO -       Worker 1: 39930030bb61...
2025-12-21 04:17:40,250 - __main__ - INFO - ðŸ“ Head node (4013ec76b302...): 4.0 GPUs
2025-12-21 04:17:40,250 - __main__ - INFO - ðŸ“ Worker node (39930030bb61...): 2.0 GPUs
2025-12-21 04:17:40,250 - __main__ - INFO - ðŸ“Š Total GPUs across all nodes: 6.0
2025-12-21 04:17:40,250 - __main__ - INFO -    Node 4013ec76b302...: 33 clients (based on 4.0 GPUs)
2025-12-21 04:17:40,250 - __main__ - INFO -    Node 39930030bb61...: 17 clients (based on 2.0 GPUs)
2025-12-21 04:17:40,251 - __main__ - INFO -    Node 4013ec76b302...: 4.0 GPU, 33 clients -> max 0.1152 GPU/client
2025-12-21 04:17:40,251 - __main__ - INFO -    Node 39930030bb61...: 2.0 GPU, 17 clients -> max 0.1118 GPU/client
2025-12-21 04:17:40,251 - __main__ - INFO - ðŸŽ¯ GPU allocation summary: {'total_available_gpus': 6.0, 'total_allocated_gpus': 5.7022, 'utilization_rate': '95.04%', 'server': 'CPU only', 'per_node_allocation': {'4013ec76b302': {'count': 33, 'total_gpu': 3.8016000000000028}, '39930030bb61': {'count': 17, 'total_gpu': 1.9005999999999992}}, 'gpu_clients': 50, 'cpu_clients': 0}
2025-12-21 04:17:40,251 - __main__ - INFO - ðŸ“‹ Client distribution: 50 GPU clients, 0 CPU clients
2025-12-21 04:17:42,351 - __main__ - INFO - ðŸ“ Server scheduled to head node: 4013ec76b302...
2025-12-21 04:17:42,504 - __main__ - INFO - âœ… Server started: 10.0.0.2:36871
2025-12-21 04:17:57,519 - __main__ - INFO - ðŸ“± Edge device distribution: {'smartphone': 50}
2025-12-21 04:17:57,520 - __main__ - INFO - ðŸ“Š Client distribution plan:
2025-12-21 04:17:57,520 - __main__ - INFO -    Client 1 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,521 - __main__ - INFO -    Client 2 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,522 - __main__ - INFO -    Client 3 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,522 - __main__ - INFO -    Client 4 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,522 - __main__ - INFO -    Client 5 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,523 - __main__ - INFO -    Client 6 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,524 - __main__ - INFO -    Client 7 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,524 - __main__ - INFO -    Client 8 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,524 - __main__ - INFO -    Client 9 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,525 - __main__ - INFO -    Client 10 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,526 - __main__ - INFO -    Client 11 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,526 - __main__ - INFO -    Client 12 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,527 - __main__ - INFO -    Client 13 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,528 - __main__ - INFO -    Client 14 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,528 - __main__ - INFO -    Client 15 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,529 - __main__ - INFO -    Client 16 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,529 - __main__ - INFO -    Client 17 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,529 - __main__ - INFO -    Client 18 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,530 - __main__ - INFO -    Client 19 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,530 - __main__ - INFO -    Client 20 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,531 - __main__ - INFO -    Client 21 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,531 - __main__ - INFO -    Client 22 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,531 - __main__ - INFO -    Client 23 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,532 - __main__ - INFO -    Client 24 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,532 - __main__ - INFO -    Client 25 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,532 - __main__ - INFO -    Client 26 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,533 - __main__ - INFO -    Client 27 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,533 - __main__ - INFO -    Client 28 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,533 - __main__ - INFO -    Client 29 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,534 - __main__ - INFO -    Client 30 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,534 - __main__ - INFO -    Client 31 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,534 - __main__ - INFO -    Client 32 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,535 - __main__ - INFO -    Client 33 -> head (4013ec76b302...), Node CPUs: 64.0, Clients on node: 33
2025-12-21 04:17:57,535 - __main__ - INFO -    Client 34 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,536 - __main__ - INFO -    Client 35 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,536 - __main__ - INFO -    Client 36 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,536 - __main__ - INFO -    Client 37 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,537 - __main__ - INFO -    Client 38 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,537 - __main__ - INFO -    Client 39 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,537 - __main__ - INFO -    Client 40 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,538 - __main__ - INFO -    Client 41 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,538 - __main__ - INFO -    Client 42 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,539 - __main__ - INFO -    Client 43 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,539 - __main__ - INFO -    Client 44 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,539 - __main__ - INFO -    Client 45 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,540 - __main__ - INFO -    Client 46 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,540 - __main__ - INFO -    Client 47 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,540 - __main__ - INFO -    Client 48 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,541 - __main__ - INFO -    Client 49 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,541 - __main__ - INFO -    Client 50 -> worker (39930030bb61...), Node CPUs: 64.0, Clients on node: 17
2025-12-21 04:17:57,541 - __main__ - INFO - ðŸ”§ Client 1 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:17:57,634 - __main__ - INFO - âœ… Client 1 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:00,638 - __main__ - INFO - ðŸ”§ Client 2 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:00,721 - __main__ - INFO - âœ… Client 2 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:03,724 - __main__ - INFO - ðŸ”§ Client 3 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:03,797 - __main__ - INFO - âœ… Client 3 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:06,801 - __main__ - INFO - ðŸ”§ Client 4 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:06,880 - __main__ - INFO - âœ… Client 4 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:09,883 - __main__ - INFO - ðŸ”§ Client 5 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:09,954 - __main__ - INFO - âœ… Client 5 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:12,957 - __main__ - INFO - ðŸ”§ Client 6 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:13,022 - __main__ - INFO - âœ… Client 6 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:16,026 - __main__ - INFO - ðŸ”§ Client 7 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:16,104 - __main__ - INFO - âœ… Client 7 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:19,106 - __main__ - INFO - ðŸ”§ Client 8 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:19,183 - __main__ - INFO - âœ… Client 8 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:22,185 - __main__ - INFO - ðŸ”§ Client 9 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:22,266 - __main__ - INFO - âœ… Client 9 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:25,269 - __main__ - INFO - ðŸ”§ Client 10 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:25,349 - __main__ - INFO - âœ… Client 10 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:28,353 - __main__ - INFO - ðŸ”§ Client 11 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:28,431 - __main__ - INFO - âœ… Client 11 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:31,432 - __main__ - INFO - ðŸ”§ Client 12 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:31,502 - __main__ - INFO - âœ… Client 12 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:34,505 - __main__ - INFO - ðŸ”§ Client 13 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:34,586 - __main__ - INFO - âœ… Client 13 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:37,590 - __main__ - INFO - ðŸ”§ Client 14 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:37,661 - __main__ - INFO - âœ… Client 14 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:40,666 - __main__ - INFO - ðŸ”§ Client 15 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:40,738 - __main__ - INFO - âœ… Client 15 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:43,741 - __main__ - INFO - ðŸ”§ Client 16 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:43,815 - __main__ - INFO - âœ… Client 16 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:46,818 - __main__ - INFO - ðŸ”§ Client 17 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:46,901 - __main__ - INFO - âœ… Client 17 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:49,905 - __main__ - INFO - ðŸ”§ Client 18 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:49,983 - __main__ - INFO - âœ… Client 18 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:52,984 - __main__ - INFO - ðŸ”§ Client 19 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:53,052 - __main__ - INFO - âœ… Client 19 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:56,056 - __main__ - INFO - ðŸ”§ Client 20 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:56,134 - __main__ - INFO - âœ… Client 20 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:18:59,139 - __main__ - INFO - ðŸ”§ Client 21 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:18:59,208 - __main__ - INFO - âœ… Client 21 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:02,212 - __main__ - INFO - ðŸ”§ Client 22 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:02,286 - __main__ - INFO - âœ… Client 22 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:05,290 - __main__ - INFO - ðŸ”§ Client 23 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:05,372 - __main__ - INFO - âœ… Client 23 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:08,374 - __main__ - INFO - ðŸ”§ Client 24 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:08,453 - __main__ - INFO - âœ… Client 24 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:11,457 - __main__ - INFO - ðŸ”§ Client 25 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:11,543 - __main__ - INFO - âœ… Client 25 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:14,545 - __main__ - INFO - ðŸ”§ Client 26 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:14,617 - __main__ - INFO - âœ… Client 26 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:17,621 - __main__ - INFO - ðŸ”§ Client 27 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:17,698 - __main__ - INFO - âœ… Client 27 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:20,702 - __main__ - INFO - ðŸ”§ Client 28 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:20,781 - __main__ - INFO - âœ… Client 28 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:23,783 - __main__ - INFO - ðŸ”§ Client 29 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:23,852 - __main__ - INFO - âœ… Client 29 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:26,857 - __main__ - INFO - ðŸ”§ Client 30 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:26,934 - __main__ - INFO - âœ… Client 30 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:29,938 - __main__ - INFO - ðŸ”§ Client 31 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:30,007 - __main__ - INFO - âœ… Client 31 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:33,011 - __main__ - INFO - ðŸ”§ Client 32 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
2025-12-21 04:19:33,081 - __main__ - INFO - âœ… Client 32 (smartphone) started on head node (4013ec76b302...)
2025-12-21 04:19:36,083 - __main__ - INFO - ðŸ”§ Client 33 resources: num_cpus=1.6848, num_gpus=0.1152, memory=2.00GB
srun: Job step aborted: Waiting up to 32 seconds for job step to finish.
srun: Job step aborted: Waiting up to 32 seconds for job step to finish.
slurmstepd-srv-it-node01: error: *** STEP 431.1 ON srv-it-node01 CANCELLED AT 2025-12-21T04:21:42 ***
slurmstepd-srv-it-node02: error: *** STEP 430.0 ON srv-it-node02 CANCELLED AT 2025-12-21T04:21:42 ***
slurmstepd-srv-it-node02: error: *** JOB 430 ON srv-it-node02 CANCELLED AT 2025-12-21T04:21:42 ***
