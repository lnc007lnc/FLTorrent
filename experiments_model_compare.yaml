# ============================================================================
# Model Comparison Experiments - MobileNetV2, ResNet18, ResNet50 on CINIC-10
# ============================================================================
#
# Usage:
#   python run_ray_hpc.py --batch experiments_model_compare.yaml
#
# Prerequisites:
#   1. Download CINIC-10:
#      wget https://datashare.ed.ac.uk/bitstream/handle/10283/3192/CINIC-10.tar.gz
#      tar -xzf CINIC-10.tar.gz -C ./data/
#
# Models:
#   - MobileNetV2: 3.5M parameters (lightweight)
#   - ResNet18: 11.7M parameters (baseline)
#   - ResNet50: 25.6M parameters (heavy)
#
# Dataset: CINIC-10 (270,000 images, 10 classes)
#
# Experiment Design:
#   - 50 clients, mesh topology with 4 neighbors
#   - timeout = {10000s (full BT), 0s (no BT)}
#   - alpha = {100000 (IID), 1.0 (moderate non-IID), 0.3 (high non-IID)}
#   - Total: 3 models × 2 timeouts × 3 alphas = 18 experiments
#
# ============================================================================

global:
  code_snapshot_dir: "./experiments_snapshots"
  output_base_dir: "./experiments_output_model_compare"

  # Default settings (GPU3 for ResNet experiments)
  partition: "gpu3"
  nodes: 1
  gpus_per_node: 2       # max 2 GPUs per allocation
  cpus_per_task: 128     # full 128 cores on gpu3
  mem: "1500G"           # full 1.5TB memory on gpu3
  time_limit: "48:00:00"

  # Chunk storage
  CHUNK_TMP_DIR: "/tmp/fl_chunks"

  # Data augmentation - standard CIFAR/CINIC augmentation for all models
  # RandomCrop(32, padding=4) + RandomHorizontalFlip + ToTensor + Normalize
  DATA_AUGMENTATION: True
  DATA_AUGMENTATION_CROP_SIZE: 32
  DATA_AUGMENTATION_CROP_PADDING: 4

experiments:
  # ==========================================================================
  # TEST SET - 已完成测试，注释掉
  # ==========================================================================
  # - name: "test_mobilenetv2_cinic10"
  #   description: "MobileNetV2 on CINIC-10, 3 clients, 3 rounds, test new data loading"
  #   config:
  #     CLIENT_NUM: 3
  #     TOTAL_ROUNDS: 3
  #     CHUNK_NUM: 8
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 2
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     LEARNING_RATE: 0.0003
  #     OPTIMIZER: "AdamW"
  #     WEIGHT_DECAY: 0.01
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 1
  #     LR_SCHEDULER_PHASE2_T_MAX: 2
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00000001
  #     LR_SCHEDULER_MILESTONES: [2]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 100000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False

  # ==========================================================================
  # MobileNetV2 Experiments (3.5M params) - 正式实验
  # ==========================================================================
  # --- Timeout = 10000s (Full BitTorrent) ---
  # [已完成] batch_20260102_163037, Round 100, acc=71.89%
  # - name: "mobilenetv2_t10000_alpha100000"
  #   description: "MobileNetV2, timeout=10000s (full BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # [已完成] batch_20260103_055220
  # - name: "mobilenetv2_t10000_alpha1"
  #   description: "MobileNetV2, timeout=10000s (full BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # non-IID: keep FedBN (default ['bn']) for better convergence

  # [已完成] batch_20260103_055220
  # - name: "mobilenetv2_t10000_alpha03"
  #   description: "MobileNetV2, timeout=10000s (full BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # non-IID: keep FedBN (default ['bn']) for better convergence

  # --- Timeout = 0s (No BitTorrent, local training only) ---
  # [已完成] batch_20260103_055220
  # - name: "mobilenetv2_t0_alpha100000"
  #   description: "MobileNetV2, timeout=0s (no BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # [已完成] batch_20260103_055220
  # - name: "mobilenetv2_t0_alpha1"
  #   description: "MobileNetV2, timeout=0s (no BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # non-IID: keep FedBN (default ['bn']) for better convergence

  # [已完成] batch_20260103_055220
  # - name: "mobilenetv2_t0_alpha03"
  #   description: "MobileNetV2, timeout=0s (no BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "mobilenetv2"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (MobileNetV2 uses lr=0.05)
  #     LEARNING_RATE: 0.05
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0004
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # non-IID: keep FedBN (default ['bn']) for better convergence

  # ==========================================================================
  # ResNet18 Experiments (11.7M params) - 已完成 batch_20260103_055220
  # ==========================================================================
  # --- Timeout = 10000s (Full BitTorrent) ---
  # - name: "resnet18_t10000_alpha100000"
  #   description: "ResNet18, timeout=10000s (full BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # - name: "resnet18_t10000_alpha1"
  #   description: "ResNet18, timeout=10000s (full BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # - name: "resnet18_t10000_alpha03"
  #   description: "ResNet18, timeout=10000s (full BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # --- Timeout = 0s (No BitTorrent, local training only) ---
  # - name: "resnet18_t0_alpha100000"
  #   description: "ResNet18, timeout=0s (no BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # - name: "resnet18_t0_alpha1"
  #   description: "ResNet18, timeout=0s (no BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # - name: "resnet18_t0_alpha03"
  #   description: "ResNet18, timeout=0s (no BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 64
  #     MODEL_TYPE: "resnet18"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # ==========================================================================
  # ResNet50 Experiments (25.6M params) - 正在运行 batch_20260105_020114
  # NOTE: BATCH_SIZE reduced from 64 to 32 to avoid CUDA OOM errors
  # ==========================================================================
  # --- Timeout = 10000s (Full BitTorrent) ---
  # [运行中] batch_20260105_020114
  # - name: "resnet50_t10000_alpha100000"
  #   description: "ResNet50, timeout=10000s (full BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # - name: "resnet50_t10000_alpha1"
  #   description: "ResNet50, timeout=10000s (full BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # - name: "resnet50_t10000_alpha03"
  #   description: "ResNet50, timeout=10000s (full BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 10000.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # --- Timeout = 0s (No BitTorrent, local training only) ---
  # - name: "resnet50_t0_alpha100000"
  #   description: "ResNet50, timeout=0s (no BT), IID data (alpha=100000)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 100000.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
  #     # IID setting: disable FedBN (aggregate BN layers normally)
  #     PERSONALIZATION_LOCAL_PARAM: []

  # - name: "resnet50_t0_alpha1"
  #   description: "ResNet50, timeout=0s (no BT), moderate non-IID (alpha=1.0)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 1.0
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # - name: "resnet50_t0_alpha03"
  #   description: "ResNet50, timeout=0s (no BT), high non-IID (alpha=0.3)"
  #   config:
  #     CLIENT_NUM: 50
  #     TOTAL_ROUNDS: 100
  #     CHUNK_NUM: 16
  #     TOPOLOGY_TYPE: "mesh"
  #     TOPOLOGY_CONNECTIONS: 4
  #     DATASET: "cinic10"
  #     DATA_ROOT: "./data"
  #     DATA_SPLITTER: "lda"
  #     DATA_SPLIT_ALPHA: 0.3
  #     DATA_SPLITS: [0.8, 0.1, 0.1]
  #     BATCH_SIZE: 32
  #     MODEL_TYPE: "resnet50"
  #     MODEL_OUT_CHANNELS: 10
  #     # SGD optimizer (standard config for CIFAR/CINIC)
  #     LEARNING_RATE: 0.1
  #     OPTIMIZER: "SGD"
  #     OPTIMIZER_MOMENTUM: 0.9
  #     WEIGHT_DECAY: 0.0005
  #     LOCAL_UPDATE_STEPS: 1
  #     GRAD_CLIP: 1.0
  #     LR_SCHEDULER_TYPE: "SequentialLR"
  #     LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
  #     LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
  #     LR_SCHEDULER_PHASE2_T_MAX: 90
  #     LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
  #     LR_SCHEDULER_MILESTONES: [11]
  #     CRITERION_TYPE: "CrossEntropyLoss"
  #     EVAL_FREQ: 1
  #     EVAL_METRICS: ["acc", "correct", "f1"]
  #     BT_ENABLE_COMPENSATION: False
  #     BITTORRENT_TIMEOUT: 0.0
  #     BT_RARITY_WEIGHT: 0.01
  #     CHUNK_NFS_COMPATIBLE: False
  #     DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
  #     DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # ==========================================================================
  # SET 2: Partial BT with optimized timeouts (based on 20% chunk receive time)
  # Timeouts: MobileNetV2=40s, ResNet18=35s, ResNet50=70s
  # Alpha: 100000 (IID), 1.0 (moderate non-IID), 0.3 (high non-IID)
  # Total: 3 models x 3 alphas = 9 experiments
  # ==========================================================================

  # --- MobileNetV2 with timeout=40s (on GPU2) ---
  - name: "mobilenetv2_t40_alpha100000"
    description: "MobileNetV2, timeout=40s (partial BT), IID data (alpha=100000)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 100000.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "mobilenetv2"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.05
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0004
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 40.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
      PERSONALIZATION_LOCAL_PARAM: []

  - name: "mobilenetv2_t40_alpha1"
    description: "MobileNetV2, timeout=40s (partial BT), moderate non-IID (alpha=1.0)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 1.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "mobilenetv2"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.05
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0004
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 40.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  - name: "mobilenetv2_t40_alpha03"
    description: "MobileNetV2, timeout=40s (partial BT), high non-IID (alpha=0.3)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 0.3
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "mobilenetv2"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.05
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0004
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.000001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 40.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # --- ResNet18 with timeout=30s (on GPU2) ---
  - name: "resnet18_t30_alpha100000"
    description: "ResNet18, timeout=30s (partial BT), IID data (alpha=100000)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 100000.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "resnet18"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 30.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
      PERSONALIZATION_LOCAL_PARAM: []

  - name: "resnet18_t30_alpha1"
    description: "ResNet18, timeout=30s (partial BT), moderate non-IID (alpha=1.0)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 1.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "resnet18"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 30.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  - name: "resnet18_t30_alpha03"
    description: "ResNet18, timeout=30s (partial BT), high non-IID (alpha=0.3)"
    partition: "gpu2"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 4
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 0.3
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 64
      MODEL_TYPE: "resnet18"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 30.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  # --- ResNet50 with timeout=165s (on GPU3) ---
  - name: "resnet50_t165_alpha100000"
    description: "ResNet50, timeout=165s (partial BT), IID data (alpha=100000)"
    partition: "gpu3"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 2
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 100000.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 32
      MODEL_TYPE: "resnet50"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 165.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]
      PERSONALIZATION_LOCAL_PARAM: []

  - name: "resnet50_t165_alpha1"
    description: "ResNet50, timeout=165s (partial BT), moderate non-IID (alpha=1.0)"
    partition: "gpu3"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 2
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 1.0
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 32
      MODEL_TYPE: "resnet50"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 165.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

  - name: "resnet50_t165_alpha03"
    description: "ResNet50, timeout=165s (partial BT), high non-IID (alpha=0.3)"
    partition: "gpu3"
    cpus_per_task: 64
    mem: "500G"
    gpus_per_node: 2
    config:
      CLIENT_NUM: 50
      TOTAL_ROUNDS: 100
      CHUNK_NUM: 16
      TOPOLOGY_TYPE: "mesh"
      TOPOLOGY_CONNECTIONS: 4
      DATASET: "cinic10"
      DATA_ROOT: "./data"
      DATA_SPLITTER: "lda"
      DATA_SPLIT_ALPHA: 0.3
      DATA_SPLITS: [0.8, 0.1, 0.1]
      BATCH_SIZE: 32
      MODEL_TYPE: "resnet50"
      MODEL_OUT_CHANNELS: 10
      LEARNING_RATE: 0.1
      OPTIMIZER: "SGD"
      OPTIMIZER_MOMENTUM: 0.9
      WEIGHT_DECAY: 0.0005
      LOCAL_UPDATE_STEPS: 1
      GRAD_CLIP: 1.0
      LR_SCHEDULER_TYPE: "SequentialLR"
      LR_SCHEDULER_PHASE1_START_FACTOR: 0.01
      LR_SCHEDULER_PHASE1_TOTAL_ITERS: 10
      LR_SCHEDULER_PHASE2_T_MAX: 90
      LR_SCHEDULER_PHASE2_ETA_MIN: 0.00001
      LR_SCHEDULER_MILESTONES: [11]
      CRITERION_TYPE: "CrossEntropyLoss"
      EVAL_FREQ: 1
      EVAL_METRICS: ["acc", "correct", "f1"]
      BT_ENABLE_COMPENSATION: True
      BITTORRENT_TIMEOUT: 165.0
      BT_RARITY_WEIGHT: 0.01
      CHUNK_NFS_COMPATIBLE: False
      DATA_TRANSFORM_MEAN: [0.47889522, 0.47227842, 0.43047404]
      DATA_TRANSFORM_STD: [0.24205776, 0.23828046, 0.25874835]

