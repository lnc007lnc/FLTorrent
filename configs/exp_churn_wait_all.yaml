# Experiment 2: Wait-for-all baseline (very long timeout, no churn tolerance)
# Purpose: Control group showing system stalls with churn

use_gpu: True
device: 0
seed: 42

federate:
  mode: 'standalone'
  client_num: 50
  total_round_num: 100
  sample_client_num: 50
  method: FedAvg

data:
  root: 'data/'
  type: 'CIFAR10@torchvision'
  splits: [0.8, 0.1, 0.1]
  splitter: 'lda'
  splitter_args: [{'alpha': 0.5}]

dataloader:
  batch_size: 32

model:
  type: convnet2
  hidden: 512
  out_channels: 10
  dropout: 0.0

train:
  local_update_steps: 5
  batch_or_epoch: epoch
  optimizer:
    lr: 0.01
    type: SGD

criterion:
  type: CrossEntropyLoss

trainer:
  type: cvtrainer

eval:
  freq: 1
  metrics: ['acc', 'correct']
  report: ['weighted_avg', 'avg', 'raw']

# BitTorrent with wait-for-all behavior (very long timeout)
bittorrent:
  enable: true
  timeout: 3600.0  # 1 hour timeout = effectively wait-for-all
  enable_compensation: false  # No compensation
  churn_injection: true
  churn_rate: 0.1  # Same churn but system will stall
  churn_mode: 'silent'
  save_statistics: true
  verbose: true
  log_dir: 'exp_out/churn_wait_all/bt_logs'

chunk:
  num_chunks: 16
  importance_method: 'magnitude'

outdir: 'exp_out/churn_wait_all'
